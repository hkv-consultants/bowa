{% extends "bowa/result.html" %}

{% block javascript %}
  {{ block.super }}
<script>

  var toetseenheid = $('#toetseenheid>option:selected').text();
  var grondgebruik = $('#grondgebruik>option:selected').text();
  var normfunctie =  $('#normfunctie>option:selected').text();

  set_image_url(toetseenheid, grondgebruik, normfunctie);

  $("#toetseenheid").change(function() {
    toetseenheid = $(this).val();
    set_image_url(toetseenheid, grondgebruik, normfunctie);
  });

  $("#grondgebruik").change(function() {
    grondgebruik = $(this).val();
    set_image_url(toetseenheid, grondgebruik, normfunctie);
  });

  $("#normfunctie").change(function() {
    normfunctie = $(this).val();
    set_image_url(toetseenheid, grondgebruik, normfunctie);
  });

  function set_image_url(toetseenheid, grondgebruik, normfunctie) {
    var base_image_url = "{% url bowa_result_graph_image slug=view.result.slug %}";

    var image_url = base_image_url + "&toetseenheid=" + toetseenheid + "&grondgebruik=" + grondgebruik + "&normfuntie=" + normfunctie;
    console.log("image_url = " + image_url);

    $("#imageDiv").attr("src", image_url);
  }


</script>
{% endblock javascript %}

{% block content %}
  <div class="container">
    <h1>Resultaten - Grafiek</h1>
    <div class="row well">
	<div class="span3">
		<div class="control-group">
			<label class="control-label" for="toetseenheid">Toetseenheid</label>
			<select id="toetseenheid">
	    			{% for row in view.result.list_of_toetseenheden %}
	      			<option>{{ row }}</option>
	    			{% endfor %}
		 	</select> 
		</div>
		<div class="control-group">
			<label class="control-label" for="grondgebruik">Grondgebruik</label>
			<select id="grondgebruik">
			 	{% for row in view.result.list_of_grondgebruiken %}
	      			<option>{{ row }}</option>
				  {% endfor %}
		 	</select> 
		</div>
		<div class="control-group">
			<label class="control-label" for="normfunctie">Normfunctie</label>
			<select id="normfunctie">
				 <option>Toetshoogte</option>
				 <option>Volume</option>
				 <option>Oppervlakte</option>
				 <option>Percentage</option>
		 	</select> 
		</div>
	</div>
	<div class="span9">
	  <img id="ImageDiv" width="300px" height="300px" style="background-color:gray"  />
	</div>
    </div>
  </div>
{% endblock content %}
